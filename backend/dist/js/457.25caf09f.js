"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[457],{7457:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var a=n(3396),s=n(9242);const o=t=>((0,a.dD)("data-v-2199a2fe"),t=t(),(0,a.Cn)(),t),i={class:"order-form"},r=o((()=>(0,a._)("br",null,null,-1))),c=["src"];function u(t,e,n,o,u,l){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.textInput=t),placeholder:"请输入你想AI绘画的内容(英文)",class:"input"},null,512),[[s.nr,u.textInput]]),r,(0,a._)("button",{onClick:e[1]||(e[1]=(...t)=>l.submit&&l.submit(...t)),class:"button"},"提交"),u.cdnImageUrl?((0,a.wg)(),(0,a.iD)("img",{key:0,src:u.cdnImageUrl,alt:"AI绘画结果",class:"result-image"},null,8,c)):(0,a.kq)("",!0)])}var l={data(){return{textInput:"",cdnImageUrl:""}},methods:{async submit(){try{const t=document.cookie.replace(/(?:(?:^|.*;\s*)token\s*=\s*([^;]*).*$)|^.*$/,"$1"),e=await fetch("http://47.108.72.107:9099/api/order",{method:"POST",headers:{"Content-Type":"application/json",token:`${t}`},body:JSON.stringify({text:this.textInput})}),n=await e.json();if(200===e.status)if(!0===n.success){const e=n.uid,a=await fetch("http://47.108.72.107:9099/api/config",{method:"POST",headers:{token:`${t}`}}),s=await a.json(),o=s.authorization;let i,r="";while("finished"!==r){const t=await fetch(`https://open.nolibox.com/prod-open-aigc/engine/status/${e}`,{headers:{Authorization:o}});i=await t.json(),r=i.status,"finished"!==r&&await new Promise((t=>setTimeout(t,1e3)))}this.cdnImageUrl=i.data.cdn}else alert("出现了一些错误，请联系管理员");else alert(n)}catch(t){console.error("Error:",t)}}}},d=n(89);const h=(0,d.Z)(l,[["render",u],["__scopeId","data-v-2199a2fe"]]);var p=h}}]);
//# sourceMappingURL=457.25caf09f.js.map